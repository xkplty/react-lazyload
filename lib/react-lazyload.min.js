"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var React=require("react"),React__default=_interopDefault(React),reactDom=require("react-dom"),extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};function __extends(e,t){function o(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(n,o,e){var r,i,a,f,l,s,c=0,u=!1,d=!1,t=!0;if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT);function p(e){var t=r,o=i;return r=i=void 0,c=e,f=n.apply(o,t)}function b(e){var t=e-s;return void 0===s||o<=t||t<0||d&&a<=e-c}function m(){var e=now();if(b(e))return v(e);l=setTimeout(m,function(e){var t=o-(e-s);return d?nativeMin(t,a-(e-c)):t}(e))}function v(e){return l=void 0,t&&r?p(e):(r=i=void 0,f)}function y(){var e=now(),t=b(e);if(r=arguments,i=this,s=e,t){if(void 0===l)return function(e){return c=e,l=setTimeout(m,o),u?p(e):f}(s);if(d)return l=setTimeout(m,o),p(s)}return void 0===l&&(l=setTimeout(m,o)),f}return o=toNumber(o)||0,isObject(e)&&(u=!!e.leading,a=(d="maxWait"in e)?nativeMax(toNumber(e.maxWait)||0,o):a,t="trailing"in e?!!e.trailing:t),y.cancel=function(){void 0!==l&&clearTimeout(l),r=s=i=l=void(c=0)},y.flush=function(){return void 0===l?f:v(now())},y}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var o=reIsBinary.test(e);return o||reIsOctal.test(e)?freeParseInt(e.slice(2),o?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce,FUNC_ERROR_TEXT$1="Expected a function",NAN$1=NaN,symbolTag$1="[object Symbol]",reTrim$1=/^\s+|\s+$/g,reIsBadHex$1=/^[-+]0x[0-9a-f]+$/i,reIsBinary$1=/^0b[01]+$/i,reIsOctal$1=/^0o[0-7]+$/i,freeParseInt$1=parseInt,freeGlobal$1="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf$1="object"==typeof self&&self&&self.Object===Object&&self,root$1=freeGlobal$1||freeSelf$1||Function("return this")(),objectProto$1=Object.prototype,objectToString$1=objectProto$1.toString,nativeMax$1=Math.max,nativeMin$1=Math.min,now$1=function(){return root$1.Date.now()};function debounce$1(n,o,e){var r,i,a,f,l,s,c=0,u=!1,d=!1,t=!0;if("function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT$1);function p(e){var t=r,o=i;return r=i=void 0,c=e,f=n.apply(o,t)}function b(e){var t=e-s;return void 0===s||o<=t||t<0||d&&a<=e-c}function m(){var e=now$1();if(b(e))return v(e);l=setTimeout(m,function(e){var t=o-(e-s);return d?nativeMin$1(t,a-(e-c)):t}(e))}function v(e){return l=void 0,t&&r?p(e):(r=i=void 0,f)}function y(){var e=now$1(),t=b(e);if(r=arguments,i=this,s=e,t){if(void 0===l)return function(e){return c=e,l=setTimeout(m,o),u?p(e):f}(s);if(d)return l=setTimeout(m,o),p(s)}return void 0===l&&(l=setTimeout(m,o)),f}return o=toNumber$1(o)||0,isObject$1(e)&&(u=!!e.leading,a=(d="maxWait"in e)?nativeMax$1(toNumber$1(e.maxWait)||0,o):a,t="trailing"in e?!!e.trailing:t),y.cancel=function(){void 0!==l&&clearTimeout(l),r=s=i=l=void(c=0)},y.flush=function(){return void 0===l?f:v(now$1())},y}function throttle(e,t,o){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);return isObject$1(o)&&(n="leading"in o?!!o.leading:n,r="trailing"in o?!!o.trailing:r),debounce$1(e,t,{leading:n,maxWait:t,trailing:r})}function isObject$1(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike$1(e){return!!e&&"object"==typeof e}function isSymbol$1(e){return"symbol"==typeof e||isObjectLike$1(e)&&objectToString$1.call(e)==symbolTag$1}function toNumber$1(e){if("number"==typeof e)return e;if(isSymbol$1(e))return NAN$1;if(isObject$1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim$1,"");var o=reIsBinary$1.test(e);return o||reIsOctal$1.test(e)?freeParseInt$1(e.slice(2),o?2:8):reIsBadHex$1.test(e)?NAN$1:+e}var lodash_throttle=throttle,wrap=function(r,i){return function(e,t,o,n){e[r]?e[r](t,o,n):e[i]&&e[i]("on"+t,o)}},add=wrap("addEventListener","attachEvent"),remove=wrap("removeEventListener","detachEvent"),style=function(e,t){return"undefined"!=typeof getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.style[t]},overflow=function(e){return style(e,"overflow")+style(e,"overflow-y")+style(e,"overflow-x")},getScrollParent=function(e){if(!(e instanceof HTMLElement))return window;for(var t=e;t&&t!==document.body&&t!==document.documentElement&&t.parentNode;){if(/(scroll|auto)/.test(overflow(t)))return t;t=t.parentNode}return window};function getElementPosition(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}var isHidden=function(e){return null===e.offsetParent};function isInViewport(e,t,o){if(isHidden(e))return!1;var n,r,i,a;if(void 0===t)n=window.pageYOffset,i=window.pageXOffset,r=n+window.innerHeight,a=i+window.innerWidth;else{var f=getElementPosition(t);n=f.top,i=f.left,r=n+t.offsetHeight,a=i+t.offsetWidth}var l=getElementPosition(e);return n<=l.top+e.offsetHeight+o.top&&r>=l.top-o.bottom&&i<=l.left+e.offsetWidth+o.left&&a>=l.left-o.right}var LazyLoad=function(t){function e(e){var u=t.call(this,e)||this;return u._mounted=!1,u.getEventNode=function(){if(u.props.scrollContainer){var e=document.querySelectorAll(u.props.scrollContainer);return 0<e.length&&e[e.length-1]||getScrollParent(reactDom.findDOMNode(u))}return getScrollParent(reactDom.findDOMNode(u))},u.getOffset=function(){var e=u.props,t=e.offset,o=e.offsetVertical,n=e.offsetHorizontal,r=e.offsetTop,i=e.offsetBottom,a=e.offsetLeft,f=e.offsetRight,l=e.threshold||t,s=o||l,c=n||l;return{top:r||s,bottom:i||s,left:a||c,right:f||c}},u.lazyLoadHandler=function(){if(u._mounted){var e=u.getOffset();if(isInViewport(reactDom.findDOMNode(u),u.getEventNode(),e)){var t=u.props.onContentVisible;u.setState({visible:!0},function(){t&&t()}),u.detachListeners()}}},u.detachListeners=function(){var e=u.getEventNode();remove(window,"resize",u.lazyLoadHandler),remove(e,"scroll",u.lazyLoadHandler)},u.state={visible:!1},0<e.throttle&&(e.debounce?u.lazyLoadHandler=lodash_debounce(u.lazyLoadHandler,e.throttle):u.lazyLoadHandler=lodash_throttle(u.lazyLoadHandler,e.throttle)),u}return __extends(e,t),e.prototype.componentDidMount=function(){this._mounted=!0;var e=this.getEventNode();window.requestAnimationFrame(this.lazyLoadHandler),add(window,"resize",this.lazyLoadHandler),add(e,"scroll",this.lazyLoadHandler)},e.prototype.componentWillReceiveProps=function(){this.state.visible||this.lazyLoadHandler()},e.prototype.shouldComponentUpdate=function(e,t){return t.visible},e.prototype.componentWillUnmount=function(){this._mounted=!1,this.detachListeners()},e.prototype.render=function(){var e=this.props,t=e.children,o=e.className,n=e.height,r=e.width,i=e.fallbackUI,a=this.state.visible,f={height:n,width:r},l="LazyLoad"+(a?" is-visible":"")+(o?" "+o:"");return React__default.createElement(this.props.elementType,{className:l,style:f},a?React.Children.only(t):i)},e.defaultProps={elementType:"div",debounce:!0,offset:0,offsetBottom:0,offsetHorizontal:0,offsetLeft:0,offsetRight:0,offsetTop:0,offsetVertical:0,throttle:250,scrollContainer:"",fallbackUI:null},e}(React.Component);module.exports=LazyLoad;
//# sourceMappingURL=react-lazyload.min.js.map
